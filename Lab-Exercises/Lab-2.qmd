---
title: "Lab 2 - Getting your image ready for classification"
---

With this tutorial, we will load bands 1-7 from a Landsat 8 Image 

**Requirements:**

Downloaded Landsat Tile images for bands 1 - 7
Software: ENVI Classic 6.0

## Step 1. Start ENVI Classic

> In the search bar next to the windows icon type: *"ENVI"*

![Open ENVI Classic](Images/Lab02_Step01_StartENVIclassic.PNG)

> Click on *ENVI Classic 6.0*

ENVI Classic will Start up and you will see a toolbar

![ENVI Classic toolbar](Images/Lab02_Step01_ENVIclassic_bar.PNG)

***
## Step 2. Load Landsat 8 Bands

Next we will load landsat 8 bands 1-7 note that when you download a landsat tile you get a seperate file for each band and also a .txt file containing metadata about the Landsat Product you have downloaded.

Recall that Landsat8 OLI/TIRS has 11 Bands, we will only be working with bands 1-7 in this exercise Ultra-Blue to SWIR 2:

**Operational Land Imager (OLI)**

* Band 1 Ultra-Blue | $30m$ | $0.43 -0.45\mu m$
* Band 2 Blue | $30m$ | $0.450 - 0.51\mu m$
* Band 3 Green | $30m$ | $0.53 - 0.59\mu m$
* Band 4 Red | $30m$ | $0.64 - 0.67\mu m$
* Band 5 Near-Infrared | $30m$ | $0.85 - 0.88\mu m$
* Band 6 SWIR 1 | $30m$ | $1.57 - 1.655\mu m$
* Band 7 SWIR 2 | $30m$ | $2.11 - 2.29\mu m$
* Band 8 Panchromatic | $15m$ | $0.50 - 0.68\mu m$
* Band 9 Cirrus | $30m$ | $1.36 - 1.38\mu m$

**Thermal Infrared Sensor (TIRS)**

* Band 10 TIRS 1 | $100m$ | $10.06 - 11.19\mu m$
* Band 11 TIRS 2 | $100m$ | $11.5 - 12.51\mu m$


> From the ENVI classic Toolbar -- File // Open External File // Generic Formats // 

![Open .tiff files](Images/Lab02_Step02_OpenExternal.PNG) 

 Navigate to the location of the Landsat 8 bands on your computer or on a local drive

> Hold Shift and Select all files, they should all look like this: LC08_L2SP_037035_20210608_20210615_02_T1_SR_B**N**.TIF

Note: **N** = 1-7

![Select all files](Images/Lab02_Step02_SelectFiles.PNG)

Next you should see a new window pop up containing the available bands, each loaded as a seperate image with 1-Band each, we will combine them into a single image containing 7 bands in step 4 below.

![Available Bands](Images/Lab02_Step02_AvailableBands.PNG)

***
## Step 3. Calibrate each band

We need to calibrate each individual band using the metadata and convert the DN (Digital Number) values to Radiance values. But now is also a good time to look at the meta-data file associated with the bands.

> Navigate to the Directory containing your band images in Explorer

> Create a new folder/directory called **Calibrated** ... where we will store the calibrated files. 

> -- Select the metadata file *LC08_L2SP_037035_20210608_20210615_02_T1_MTL.txt*  and *Open with* Notepad

![Create Dir - Open Metadata](Images/Lab02_Step03_OpenMetadata.PNG)

Near the bottom of the Meta Data File you will see 

* MAP_PROJECTION = 'UTM' - this is the Universal Tranverse Mercator projection which uses $meters$
* DATUM = 'WGS84'
* UTM_ZONE = 12
* GRID_CELL_SIZE_REFLECTIVE = 30.00  - ($meters$ because of UTMs)

Now that we have checked the Metadata and everything looks as expected lets **Calibrate the Images**. We will calibrate each image **One-at-a-time**

> From the ENVI classic Toolbar -- Select: *Basic Tools* // *PreProcessing* // *Calibration utilities* // *Landsat calibration* 

![Landsat Calibration](Images/Lab02_Step03_Calibrate.PNG)

> Click on the first file and check to make sure it ends in *_B1.TIF* 

![Select and Calibrate Band 1](Images/Lab02_Step03_SelectB1.PNG)

> rename the file LC08_B1_cal and save it to the *~somepath/Calibrated* directory

> Click **OK**

![Save Calibrated band 1](Images/Lab02_Step03_SaveCalB1.PNG)

> Repeat with band 2, making sure to click on the the file ending in *_B2.TIF*, rename the file LC08_B2_cal

> Repeat with bands 3 through 7

When you are finished you Calibrated Directory should contain 14 files:

LC08_B**N**cal; **N** = 1 - 7 
LC08_B**N**cal.hdr; **N** = 1 - 7

![Calibrated Directory](Images/Lab02_Step03_CalDir.PNG)

*** 
## Step 4. Create a layer/band stack

Now we need to load the calibrated bands into ENVI as a layer stack, or a multi-band image

> From the ENVI classic Toolbar -- Select *Basic Tools* // *Layer Stacking*

![Select Layer Stacking](Images/Lab02_Step04_select_stack.PNG)

The Layer Stacking Paremeters window will now open

> Click *Import File* on the Layer Stacking Parameters window then Navigate to your *Calibrated* Directory and select the calibrated bands 1 - 7

![Select calibrated files](Images/Lab02_Step04_LayerStackWindow.PNG)

> Next click *Reorder files* and move them around so they are 1-7 from top to bottom.

![Reorder Files](Images/Lab02_Step04_reorder.PNG)

> Name the stack **LC08_B1_B7_cal_stack, save it in the *Calibrated* directory

Notice on the right side of the Layer Stacking Paramters window that it confirms that the stack is UTM Zone 12, WGS84, and the pixel size is 30 meters.

![Save and compile stack](Images/Lab02_Step04_SaveStack.PNG)

> Click **OK**

***
## Step 5. Open Stacked Image

> Now go to your **Avialable Bands List** Window and click Load Band

A Greyscale image will appear with three windows showing Band 1 (though its really band seven) I know it is confusing which is why in the next step we will reorder and rename the bands in the bands list.

![Load Greyscale](Images/Lab02_Step05_LoadImage.PNG)

***
## Step 6. Edit Band Names Attributes 

> From the ENVI classic Toolbar -- Select: *File* // *Edit ENVI header*

> When the Edit Header Input File window pops up, -- Select *LC08_B1_B7_cal_stack* click **OK**

> When the Header Info window pops up, -- Select *Edit Attributes* // *Band Names*

> When the Edit Band Name values window opens -- Select the first Layer. It should be something like: Layer **(TM Cal (Band 1:LC08_L2SP_037035_20210608_20210615_02_T1_SR_B7.TIF):LC08_B7_cal)** replace that with **Band_B7** and hit **Enter** on your keyboard  orclick **OK**

> Repeat with bands 1-6 ensuring you are correctly naming the bands. 

> Once completed the Avilable Bands List window should show the new names and they should be in order 1-7 from top to bottom 

![New band names](Images/Lab02_Step06_NewBandNames.PNG)

***

## Step 7. Edit Band Attributes

Next we will edit the attributes and change the units to wavelength and select the mean wavelength for each landsat band. 

* Band 1 = mean(c(0.43,0.45)) = $0.44\mu m$
* Band 2 = mean(c(0.45,0.51)) = $0.48\mu m$
* Band 3 = mean(c(0.53,0.59)) = $0.56\mu m$
* Band 4 = mean(c(0.64,0.67)) = $0.655\mu m$
* Band 5 = mean(c(0.85,0.88)) = $0.865\mu m$
* Band 6 = mean(c(1.57,1.655)) = $1.6125\mu m$
* Band 7 = mean(c(2.11,2.29)) = $2.2\mu m$

>  From the ENVI classic Toolbar -- Select: *File* // *Edit ENVI header*

> When the Edit Header Input File window pops up, -- Select *LC08_B1_B7_cal_stack* click **OK**

> When the Header Info window pops up, -- Select *Edit Attributes* // *Wavelengths*

> In the *Edit Wavelength Values* window -- Select *Band:1 :0.0000* and input the number for Band 1 from above (0.44) which is the mean wavelength or midpoint in the range of values for that band 

> Make sure to select Micrometers from the Wavelength/FWHM Units dropdown

![Edit Wavelength Values](Images/Lab02_Step07_wavelenthB1_044.PNG)

> Repeat with other 7 bands using values from above and click **OK**

> when you are finished it should look like this:

![Finsihed step 7](Images/Lab02_Step07_finished.PNG)

***
## Step 8. Explore the Image

> In the Available Bands List window, toggle from Gray Scale to RGB Color and Click Load RGB selecting Band_4 for R or Red, Band_3 for G or Green and Band_2 for B or Blue

Three display windows should now pop up and be displaying the image in True Color RGB

> Click on the largest window and scroll to some spot on the map with your cursor right-click and select *Cursor Location/Value* and watch as the Data values for RG & B change as our scroll across the map. 

![Cursor Location/Value](Images/Lab02_Step08_RGB.PNG)

***
## Step 9. Display different band combinations

> Have a look at some [common band combinations]([Common Landsat Band Combinations](https://www.usgs.gov/media/images/common-landsat-band-combinations)
) used for RGB color display.

![Popular Band Combinations](Images/Lab02_Step09_bandcombos.PNG)

**At a minimum try:**

> **Color Infrared (CIR)** 
using bands 5,4 & 3 for RG & B respectively

> **False Color (Vegetation Analysis)**
using bands 6,5 & 4 for RG & B respectively